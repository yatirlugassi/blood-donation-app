{"ast":null,"code":"import React from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const UserStats=_ref=>{let{donations,userProfile}=_ref;// Calculate total blood donated (in ml)\nconst totalBloodDonated=donations.reduce((sum,donation)=>sum+donation.blood_amount_ml,0);// Calculate donations by type\nconst donationsByType=donations.reduce((acc,donation)=>{const type=donation.donation_type||'Unknown';acc[type]=(acc[type]||0)+1;return acc;},{});// Calculate average interval between donations (in days)\nconst calculateAverageDonationInterval=()=>{if(donations.length<2)return'N/A';// Sort donations by date (oldest first)\nconst sortedDonations=[...donations].sort((a,b)=>new Date(a.donation_date).getTime()-new Date(b.donation_date).getTime());let totalDays=0;for(let i=1;i<sortedDonations.length;i++){const prevDate=new Date(sortedDonations[i-1].donation_date);const currDate=new Date(sortedDonations[i].donation_date);const diffTime=Math.abs(currDate.getTime()-prevDate.getTime());const diffDays=Math.ceil(diffTime/(1000*60*60*24));totalDays+=diffDays;}const averageDays=Math.round(totalDays/(sortedDonations.length-1));return`${averageDays} days`;};// Calculate potential lives saved (rough estimate: 1 donation can save up to 3 lives)\nconst potentialLivesSaved=donations.length*3;return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-card stats-card\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Your Impact\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"stats-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stat-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-value\",children:(userProfile===null||userProfile===void 0?void 0:userProfile.donation_count)||0}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:\"Total Donations\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-value\",children:totalBloodDonated>0?`${(totalBloodDonated/1000).toFixed(1)}L`:'0L'}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:\"Blood Donated\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-value\",children:potentialLivesSaved}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:\"Lives Potentially Saved\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-value\",children:calculateAverageDonationInterval()}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:\"Avg. Interval\"})]})]}),Object.keys(donationsByType).length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"donation-types\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Donation Types\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"donation-types-list\",children:Object.entries(donationsByType).map(_ref2=>{let[type,count]=_ref2;return/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"donation-type\",children:type}),/*#__PURE__*/_jsx(\"span\",{className:\"donation-count\",children:count})]},type);})})]})]});};export default UserStats;","map":{"version":3,"names":["React","jsx","_jsx","jsxs","_jsxs","UserStats","_ref","donations","userProfile","totalBloodDonated","reduce","sum","donation","blood_amount_ml","donationsByType","acc","type","donation_type","calculateAverageDonationInterval","length","sortedDonations","sort","a","b","Date","donation_date","getTime","totalDays","i","prevDate","currDate","diffTime","Math","abs","diffDays","ceil","averageDays","round","potentialLivesSaved","className","children","donation_count","toFixed","Object","keys","entries","map","_ref2","count"],"sources":["C:/Users/yatir/finalProjectReact/frontend/src/components/Dashboard/UserStats.tsx"],"sourcesContent":["import React from 'react';\r\nimport { Donation } from '../../services/dashboardService';\r\n\r\ninterface UserStatsProps {\r\n  donations: Donation[];\r\n  userProfile: any | null;\r\n}\r\n\r\nconst UserStats: React.FC<UserStatsProps> = ({ donations, userProfile }) => {\r\n  // Calculate total blood donated (in ml)\r\n  const totalBloodDonated = donations.reduce((sum, donation) => sum + donation.blood_amount_ml, 0);\r\n  \r\n  // Calculate donations by type\r\n  const donationsByType = donations.reduce((acc, donation) => {\r\n    const type = donation.donation_type || 'Unknown';\r\n    acc[type] = (acc[type] || 0) + 1;\r\n    return acc;\r\n  }, {} as Record<string, number>);\r\n\r\n  // Calculate average interval between donations (in days)\r\n  const calculateAverageDonationInterval = () => {\r\n    if (donations.length < 2) return 'N/A';\r\n    \r\n    // Sort donations by date (oldest first)\r\n    const sortedDonations = [...donations].sort(\r\n      (a, b) => new Date(a.donation_date).getTime() - new Date(b.donation_date).getTime()\r\n    );\r\n    \r\n    let totalDays = 0;\r\n    for (let i = 1; i < sortedDonations.length; i++) {\r\n      const prevDate = new Date(sortedDonations[i - 1].donation_date);\r\n      const currDate = new Date(sortedDonations[i].donation_date);\r\n      const diffTime = Math.abs(currDate.getTime() - prevDate.getTime());\r\n      const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n      totalDays += diffDays;\r\n    }\r\n    \r\n    const averageDays = Math.round(totalDays / (sortedDonations.length - 1));\r\n    return `${averageDays} days`;\r\n  };\r\n\r\n  // Calculate potential lives saved (rough estimate: 1 donation can save up to 3 lives)\r\n  const potentialLivesSaved = donations.length * 3;\r\n\r\n  return (\r\n    <div className=\"dashboard-card stats-card\">\r\n      <h2>Your Impact</h2>\r\n      <div className=\"stats-grid\">\r\n        <div className=\"stat-item\">\r\n          <div className=\"stat-value\">{userProfile?.donation_count || 0}</div>\r\n          <div className=\"stat-label\">Total Donations</div>\r\n        </div>\r\n        \r\n        <div className=\"stat-item\">\r\n          <div className=\"stat-value\">\r\n            {totalBloodDonated > 0 \r\n              ? `${(totalBloodDonated / 1000).toFixed(1)}L` \r\n              : '0L'}\r\n          </div>\r\n          <div className=\"stat-label\">Blood Donated</div>\r\n        </div>\r\n        \r\n        <div className=\"stat-item\">\r\n          <div className=\"stat-value\">{potentialLivesSaved}</div>\r\n          <div className=\"stat-label\">Lives Potentially Saved</div>\r\n        </div>\r\n        \r\n        <div className=\"stat-item\">\r\n          <div className=\"stat-value\">{calculateAverageDonationInterval()}</div>\r\n          <div className=\"stat-label\">Avg. Interval</div>\r\n        </div>\r\n      </div>\r\n\r\n      {Object.keys(donationsByType).length > 0 && (\r\n        <div className=\"donation-types\">\r\n          <h3>Donation Types</h3>\r\n          <ul className=\"donation-types-list\">\r\n            {Object.entries(donationsByType).map(([type, count]) => (\r\n              <li key={type}>\r\n                <span className=\"donation-type\">{type}</span>\r\n                <span className=\"donation-count\">{count}</span>\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserStats; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}