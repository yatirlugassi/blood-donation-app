{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\yatir\\\\finalProjectReact\\\\frontend\\\\src\\\\contexts\\\\AuthContext.tsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useState, useEffect } from 'react';\nimport { supabase, getUserProfile, createUserProfile } from '../services/supabaseClient';\n\n// Define the shape of our auth context\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n// Create the context with a default undefined value\nconst AuthContext = /*#__PURE__*/createContext(undefined);\n\n// Props for the AuthProvider component\n\n// AuthProvider component\nexport const AuthProvider = ({\n  children\n}) => {\n  _s();\n  const [session, setSession] = useState(null);\n  const [user, setUser] = useState(null);\n  const [profile, setProfile] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  // Function to fetch user profile\n  const fetchUserProfile = async userId => {\n    try {\n      console.log('AuthProvider: Fetching user profile for:', userId);\n      const {\n        data: profileData,\n        error: profileError\n      } = await getUserProfile(userId);\n      if (profileError || !profileData) {\n        console.log('AuthProvider: Profile not found or error, creating new profile...');\n        // Create new profile if it doesn't exist or there was an error\n        const {\n          data: newProfile,\n          error: createError\n        } = await createUserProfile({\n          id: userId,\n          blood_type: null,\n          region: null,\n          donation_count: 0,\n          last_donation_date: null\n        });\n        if (createError) {\n          console.error('AuthProvider: Error creating user profile:', createError);\n        } else {\n          console.log('AuthProvider: New profile created successfully');\n          setProfile(newProfile);\n        }\n      } else {\n        console.log('AuthProvider: Profile fetched successfully');\n        setProfile(profileData);\n      }\n    } catch (err) {\n      console.error('Error fetching user profile:', err);\n    }\n  };\n\n  // Function to refresh the session\n  const refreshSession = async () => {\n    try {\n      var _data$session, _data$session2;\n      console.log('AuthProvider: Refreshing session...');\n      setLoading(true);\n\n      // Get the current session\n      const {\n        data,\n        error\n      } = await supabase.auth.getSession();\n      if (error) {\n        console.error('AuthProvider: Error refreshing session:', error);\n        throw error;\n      }\n      console.log('AuthProvider: Session refresh result:', data !== null && data !== void 0 && data.session ? 'Session exists' : 'No session');\n      setSession(data.session);\n      setUser(((_data$session = data.session) === null || _data$session === void 0 ? void 0 : _data$session.user) || null);\n\n      // Fetch user profile if user exists\n      if ((_data$session2 = data.session) !== null && _data$session2 !== void 0 && _data$session2.user) {\n        await fetchUserProfile(data.session.user.id);\n      } else {\n        setProfile(null);\n      }\n    } catch (err) {\n      console.error('Error refreshing session:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Initialize the auth state\n  useEffect(() => {\n    console.log('AuthProvider: Initializing auth state...');\n\n    // Set up a listener for auth state changes\n    const {\n      data: authListener\n    } = supabase.auth.onAuthStateChange(async (event, newSession) => {\n      console.log('AuthProvider: Auth state changed:', event);\n      setSession(newSession);\n      setUser((newSession === null || newSession === void 0 ? void 0 : newSession.user) || null);\n      if (event === 'SIGNED_IN' && newSession !== null && newSession !== void 0 && newSession.user) {\n        console.log('AuthProvider: User signed in, fetching profile...');\n        await fetchUserProfile(newSession.user.id);\n      } else if (event === 'SIGNED_OUT') {\n        console.log('AuthProvider: User signed out');\n        setProfile(null);\n      } else if (event === 'TOKEN_REFRESHED' && newSession !== null && newSession !== void 0 && newSession.user) {\n        console.log('AuthProvider: Token refreshed, updating session');\n        // No need to fetch profile again as it should already be in state\n      }\n    });\n\n    // Initial session check\n    refreshSession();\n\n    // Set up visibility change listener to refresh session when tab becomes visible again\n    const handleVisibilityChange = () => {\n      if (document.visibilityState === 'visible') {\n        console.log('AuthProvider: Tab became visible, refreshing session');\n        refreshSession();\n      }\n    };\n    document.addEventListener('visibilitychange', handleVisibilityChange);\n\n    // Clean up subscriptions on unmount\n    return () => {\n      console.log('AuthProvider: Cleaning up auth listener and visibility listener');\n      authListener === null || authListener === void 0 ? void 0 : authListener.subscription.unsubscribe();\n      document.removeEventListener('visibilitychange', handleVisibilityChange);\n    };\n  }, []);\n\n  // Sign up with email and password\n  const signUp = async (email, password) => {\n    try {\n      console.log('AuthProvider: Signing up user:', email);\n      setLoading(true);\n      const {\n        data,\n        error\n      } = await supabase.auth.signUp({\n        email,\n        password,\n        options: {\n          // This will skip email verification\n          data: {\n            email_confirmed: true\n          }\n        }\n      });\n      if (error) {\n        console.error('AuthProvider: Sign up error:', error);\n      } else {\n        var _data$user;\n        console.log('AuthProvider: Sign up successful, user created:', data === null || data === void 0 ? void 0 : (_data$user = data.user) === null || _data$user === void 0 ? void 0 : _data$user.id);\n\n        // Auto sign in after signup\n        console.log('AuthProvider: Auto signing in after signup...');\n        await supabase.auth.signInWithPassword({\n          email,\n          password\n        });\n      }\n      return {\n        error\n      };\n    } catch (error) {\n      console.error('AuthProvider: Exception during sign up:', error.message);\n      return {\n        error\n      };\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Sign in with email and password\n  const signIn = async (email, password) => {\n    try {\n      console.log('AuthProvider: Signing in user:', email);\n      setLoading(true);\n      const {\n        data,\n        error\n      } = await supabase.auth.signInWithPassword({\n        email,\n        password\n      });\n      if (error) {\n        console.error('AuthProvider: Sign in error:', error);\n      } else {\n        var _data$user2;\n        console.log('AuthProvider: Sign in successful, user:', data === null || data === void 0 ? void 0 : (_data$user2 = data.user) === null || _data$user2 === void 0 ? void 0 : _data$user2.id);\n\n        // Explicitly set the session and user\n        setSession(data.session);\n        setUser(data.user);\n\n        // Fetch user profile\n        if (data.user) {\n          await fetchUserProfile(data.user.id);\n        }\n      }\n      return {\n        error\n      };\n    } catch (error) {\n      console.error('AuthProvider: Exception during sign in:', error.message);\n      return {\n        error\n      };\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Sign out\n  const signOut = async () => {\n    try {\n      console.log('AuthProvider: Signing out user...');\n      setLoading(true);\n      const {\n        error\n      } = await supabase.auth.signOut();\n      if (error) {\n        console.error('AuthProvider: Error signing out:', error);\n        throw error;\n      }\n      console.log('AuthProvider: Sign out successful, clearing user state');\n      // Clear all auth state\n      setUser(null);\n      setSession(null);\n      setProfile(null);\n      return {\n        error: null\n      };\n    } catch (error) {\n      console.error('AuthProvider: Exception during sign out:', error.message);\n      return {\n        error\n      };\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Reset password\n  const resetPassword = async email => {\n    try {\n      setLoading(true);\n      const {\n        error\n      } = await supabase.auth.resetPasswordForEmail(email);\n      return {\n        error\n      };\n    } catch (error) {\n      console.error('Error resetting password:', error.message);\n      return {\n        error\n      };\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Update user profile\n  const updateProfile = async updates => {\n    try {\n      setLoading(true);\n      if (!user) {\n        return {\n          error: new Error('No user logged in')\n        };\n      }\n      const {\n        data,\n        error\n      } = await supabase.from('user_profiles').update(updates).eq('id', user.id).select().single();\n      if (error) {\n        throw error;\n      }\n      setProfile(data);\n      return {\n        error: null\n      };\n    } catch (error) {\n      console.error('Error updating profile:', error.message);\n      return {\n        error\n      };\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Provide the auth context value\n  const value = {\n    session,\n    user,\n    profile,\n    loading,\n    error,\n    signUp,\n    signIn,\n    signOut,\n    resetPassword,\n    updateProfile,\n    refreshSession\n  };\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 297,\n    columnNumber: 10\n  }, this);\n};\n\n// Custom hook to use the auth context\n_s(AuthProvider, \"dWDCAND/983j+iFrIFYEmcKfP9Y=\");\n_c = AuthProvider;\nexport const useAuth = () => {\n  _s2();\n  const context = useContext(AuthContext);\n  if (context === undefined) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n};\n_s2(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","supabase","getUserProfile","createUserProfile","jsxDEV","_jsxDEV","AuthContext","undefined","AuthProvider","children","_s","session","setSession","user","setUser","profile","setProfile","loading","setLoading","error","setError","fetchUserProfile","userId","console","log","data","profileData","profileError","newProfile","createError","id","blood_type","region","donation_count","last_donation_date","err","refreshSession","_data$session","_data$session2","auth","getSession","authListener","onAuthStateChange","event","newSession","handleVisibilityChange","document","visibilityState","addEventListener","subscription","unsubscribe","removeEventListener","signUp","email","password","options","email_confirmed","_data$user","signInWithPassword","message","signIn","_data$user2","signOut","resetPassword","resetPasswordForEmail","updateProfile","updates","Error","from","update","eq","select","single","value","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","useAuth","_s2","context","$RefreshReg$"],"sources":["C:/Users/yatir/finalProjectReact/frontend/src/contexts/AuthContext.tsx"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect, ReactNode } from 'react';\nimport { Session, User } from '@supabase/supabase-js';\nimport { supabase, UserProfile, getUserProfile, createUserProfile } from '../services/supabaseClient';\n\n// Define the shape of our auth context\ninterface AuthContextType {\n  session: Session | null;\n  user: User | null;\n  profile: UserProfile | null;\n  loading: boolean;\n  error: string | null;\n  signUp: (email: string, password: string) => Promise<{ error: any }>;\n  signIn: (email: string, password: string) => Promise<{ error: any }>;\n  signOut: () => Promise<{ error: any | null }>;\n  resetPassword: (email: string) => Promise<{ error: any }>;\n  updateProfile: (updates: Partial<UserProfile>) => Promise<{ error: any }>;\n  refreshSession: () => Promise<void>;\n}\n\n// Create the context with a default undefined value\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\n\n// Props for the AuthProvider component\ninterface AuthProviderProps {\n  children: ReactNode;\n}\n\n// AuthProvider component\nexport const AuthProvider: React.FC<AuthProviderProps> = ({ children }) => {\n  const [session, setSession] = useState<Session | null>(null);\n  const [user, setUser] = useState<User | null>(null);\n  const [profile, setProfile] = useState<UserProfile | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  // Function to fetch user profile\n  const fetchUserProfile = async (userId: string) => {\n    try {\n      console.log('AuthProvider: Fetching user profile for:', userId);\n      const { data: profileData, error: profileError } = await getUserProfile(userId);\n      \n      if (profileError || !profileData) {\n        console.log('AuthProvider: Profile not found or error, creating new profile...');\n        // Create new profile if it doesn't exist or there was an error\n        const { data: newProfile, error: createError } = await createUserProfile({\n          id: userId,\n          blood_type: null,\n          region: null,\n          donation_count: 0,\n          last_donation_date: null,\n        });\n        \n        if (createError) {\n          console.error('AuthProvider: Error creating user profile:', createError);\n        } else {\n          console.log('AuthProvider: New profile created successfully');\n          setProfile(newProfile);\n        }\n      } else {\n        console.log('AuthProvider: Profile fetched successfully');\n        setProfile(profileData);\n      }\n    } catch (err) {\n      console.error('Error fetching user profile:', err);\n    }\n  };\n\n  // Function to refresh the session\n  const refreshSession = async () => {\n    try {\n      console.log('AuthProvider: Refreshing session...');\n      setLoading(true);\n      \n      // Get the current session\n      const { data, error } = await supabase.auth.getSession();\n      \n      if (error) {\n        console.error('AuthProvider: Error refreshing session:', error);\n        throw error;\n      }\n\n      console.log('AuthProvider: Session refresh result:', data?.session ? 'Session exists' : 'No session');\n      setSession(data.session);\n      setUser(data.session?.user || null);\n\n      // Fetch user profile if user exists\n      if (data.session?.user) {\n        await fetchUserProfile(data.session.user.id);\n      } else {\n        setProfile(null);\n      }\n    } catch (err) {\n      console.error('Error refreshing session:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Initialize the auth state\n  useEffect(() => {\n    console.log('AuthProvider: Initializing auth state...');\n    \n    // Set up a listener for auth state changes\n    const { data: authListener } = supabase.auth.onAuthStateChange(async (event, newSession) => {\n      console.log('AuthProvider: Auth state changed:', event);\n      \n      setSession(newSession);\n      setUser(newSession?.user || null);\n      \n      if (event === 'SIGNED_IN' && newSession?.user) {\n        console.log('AuthProvider: User signed in, fetching profile...');\n        await fetchUserProfile(newSession.user.id);\n      } else if (event === 'SIGNED_OUT') {\n        console.log('AuthProvider: User signed out');\n        setProfile(null);\n      } else if (event === 'TOKEN_REFRESHED' && newSession?.user) {\n        console.log('AuthProvider: Token refreshed, updating session');\n        // No need to fetch profile again as it should already be in state\n      }\n    });\n\n    // Initial session check\n    refreshSession();\n\n    // Set up visibility change listener to refresh session when tab becomes visible again\n    const handleVisibilityChange = () => {\n      if (document.visibilityState === 'visible') {\n        console.log('AuthProvider: Tab became visible, refreshing session');\n        refreshSession();\n      }\n    };\n\n    document.addEventListener('visibilitychange', handleVisibilityChange);\n\n    // Clean up subscriptions on unmount\n    return () => {\n      console.log('AuthProvider: Cleaning up auth listener and visibility listener');\n      authListener?.subscription.unsubscribe();\n      document.removeEventListener('visibilitychange', handleVisibilityChange);\n    };\n  }, []);\n\n  // Sign up with email and password\n  const signUp = async (email: string, password: string) => {\n    try {\n      console.log('AuthProvider: Signing up user:', email);\n      setLoading(true);\n      \n      const { data, error } = await supabase.auth.signUp({ \n        email, \n        password,\n        options: {\n          // This will skip email verification\n          data: {\n            email_confirmed: true\n          }\n        }\n      });\n      \n      if (error) {\n        console.error('AuthProvider: Sign up error:', error);\n      } else {\n        console.log('AuthProvider: Sign up successful, user created:', data?.user?.id);\n        \n        // Auto sign in after signup\n        console.log('AuthProvider: Auto signing in after signup...');\n        await supabase.auth.signInWithPassword({ email, password });\n      }\n      \n      return { error };\n    } catch (error: any) {\n      console.error('AuthProvider: Exception during sign up:', error.message);\n      return { error };\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Sign in with email and password\n  const signIn = async (email: string, password: string) => {\n    try {\n      console.log('AuthProvider: Signing in user:', email);\n      setLoading(true);\n      \n      const { data, error } = await supabase.auth.signInWithPassword({ email, password });\n      \n      if (error) {\n        console.error('AuthProvider: Sign in error:', error);\n      } else {\n        console.log('AuthProvider: Sign in successful, user:', data?.user?.id);\n        \n        // Explicitly set the session and user\n        setSession(data.session);\n        setUser(data.user);\n        \n        // Fetch user profile\n        if (data.user) {\n          await fetchUserProfile(data.user.id);\n        }\n      }\n      \n      return { error };\n    } catch (error: any) {\n      console.error('AuthProvider: Exception during sign in:', error.message);\n      return { error };\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Sign out\n  const signOut = async () => {\n    try {\n      console.log('AuthProvider: Signing out user...');\n      setLoading(true);\n      \n      const { error } = await supabase.auth.signOut();\n      \n      if (error) {\n        console.error('AuthProvider: Error signing out:', error);\n        throw error;\n      }\n      \n      console.log('AuthProvider: Sign out successful, clearing user state');\n      // Clear all auth state\n      setUser(null);\n      setSession(null);\n      setProfile(null);\n      \n      return { error: null };\n    } catch (error: any) {\n      console.error('AuthProvider: Exception during sign out:', error.message);\n      return { error };\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Reset password\n  const resetPassword = async (email: string) => {\n    try {\n      setLoading(true);\n      const { error } = await supabase.auth.resetPasswordForEmail(email);\n      return { error };\n    } catch (error: any) {\n      console.error('Error resetting password:', error.message);\n      return { error };\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Update user profile\n  const updateProfile = async (updates: Partial<UserProfile>) => {\n    try {\n      setLoading(true);\n      if (!user) {\n        return { error: new Error('No user logged in') };\n      }\n\n      const { data, error } = await supabase\n        .from('user_profiles')\n        .update(updates)\n        .eq('id', user.id)\n        .select()\n        .single();\n\n      if (error) {\n        throw error;\n      }\n\n      setProfile(data);\n      return { error: null };\n    } catch (error: any) {\n      console.error('Error updating profile:', error.message);\n      return { error };\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Provide the auth context value\n  const value = {\n    session,\n    user,\n    profile,\n    loading,\n    error,\n    signUp,\n    signIn,\n    signOut,\n    resetPassword,\n    updateProfile,\n    refreshSession,\n  };\n\n  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\n};\n\n// Custom hook to use the auth context\nexport const useAuth = () => {\n  const context = useContext(AuthContext);\n  \n  if (context === undefined) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  \n  return context;\n}; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}