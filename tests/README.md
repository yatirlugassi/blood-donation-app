# מערכת בדיקות למערכת ניהול ומעקב לתרומות דם

מסמך זה מתאר את מערכת הבדיקות עבור מערכת ניהול ומעקב לתרומות דם ומודעות לחשיבות תרומת דם.

## סקירה כללית

מערכת הבדיקות מכסה את הפונקציונליות העיקרית של האפליקציה, כולל:

1. **אימות משתמשים** - בדיקת תהליכי התחברות, הרשמה ויציאה מהמערכת
2. **ניהול תרומות דם** - בדיקת הוספה, עריכה ומחיקה של תרומות דם
3. **בדיקת תאימות דם** - בדיקת פונקציונליות בודק תאימות סוגי דם
4. **ניהול יעדים** - בדיקת הוספה, עריכה ומחיקה של יעדי תרומה
5. **סטטיסטיקות ודוחות** - בדיקת הצגת נתונים סטטיסטיים ודוחות
6. **פונקציות קהילתיות** - בדיקת פיד קהילתי, פרסום פוסטים וטבלת מובילים
7. **מערכת התראות** - בדיקת הצגת התראות והגדרות התראות

## טכנולוגיות

הבדיקות משתמשות בטכנולוגיות הבאות:

- **Jest** - מסגרת בדיקות JavaScript
- **React Testing Library** - ספריית בדיקות לקומפוננטות React
- **Mock Service Worker** - לדימוי קריאות API

## הרצת הבדיקות

כדי להריץ את הבדיקות, יש לבצע את הפעולות הבאות:

1. התקנת התלויות:
```bash
npm install
```

2. הרצת כל הבדיקות:
```bash
npm test
```

3. הרצת בדיקות ספציפיות:
```bash
npm test -- auth.test.js
```

4. הרצת בדיקות במצב צפייה (מריץ מחדש בדיקות כאשר קבצים משתנים):
```bash
npm run test:watch
```

5. הרצת בדיקות עם כיסוי קוד:
```bash
npm run test:coverage
```

## מבנה הבדיקות

כל קובץ בדיקה מתמקד בפונקציונליות ספציפית של המערכת:

- `auth.test.js` - בדיקות אימות משתמשים
- `donations.test.js` - בדיקות ניהול תרומות דם
- `compatibility.test.js` - בדיקות בודק תאימות דם
- `goals.test.js` - בדיקות ניהול יעדים
- `stats.test.js` - בדיקות סטטיסטיקות ודוחות
- `community.test.js` - בדיקות פונקציות קהילתיות
- `notifications.test.js` - בדיקות מערכת התראות

## מוקים (Mocks)

הבדיקות משתמשות במוקים עבור:

- **Supabase Client** - לדימוי קריאות לבסיס הנתונים
- **קבצי מדיה** - לדימוי ייבוא של תמונות וקבצים אחרים
- **localStorage/sessionStorage** - לדימוי אחסון מקומי
- **window.matchMedia** - לדימוי שאילתות מדיה
- **IntersectionObserver/ResizeObserver** - לדימוי API של הדפדפן

## כיסוי קוד

הבדיקות מכסות את הפונקציונליות העיקרית של האפליקציה, כולל:

- הרשמה והתחברות משתמשים
- ניהול תרומות דם
- בדיקת תאימות דם
- ניהול יעדים אישיים
- הצגת סטטיסטיקות ודוחות
- פונקציות קהילתיות
- מערכת התראות

## הוספת בדיקות חדשות

כדי להוסיף בדיקות חדשות:

1. צור קובץ בדיקה חדש או הוסף בדיקות לקובץ קיים
2. וודא שהבדיקות מכסות את כל תרחישי השימוש העיקריים
3. השתמש במוקים מתאימים לדימוי תלויות חיצוניות
4. הרץ את הבדיקות כדי לוודא שהן עוברות

## פתרון בעיות נפוצות

- **בעיות עם מוקים** - וודא שכל המוקים הנדרשים מוגדרים ב-`setupTests.js`
- **בעיות עם תלויות** - וודא שכל התלויות מותקנות ב-`package.json`
- **בעיות עם כיסוי קוד** - בדוק את דוח הכיסוי כדי לזהות אזורים שאינם מכוסים 